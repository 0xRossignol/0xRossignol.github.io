<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="robots" content="noindex"><meta><title>标签: TypeScript - MyBlog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="MyBlog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="MyBlog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="MyBlog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="MyBlog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Rossignol"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"MyBlog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Rossignol"},"publisher":{"@type":"Organization","name":"MyBlog","logo":{"@type":"ImageObject","url":"http://example.com/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="MyBlog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/0xRossignol"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-content"><nav class="breadcrumb" aria-label="breadcrumbs"><ul><li><a href="/tags/">标签</a></li><li class="is-active"><a href="#" aria-current="page">TypeScript</a></li></ul></nav></div></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-01-28T07:39:54.000Z" title="2025/1/28 15:39:54">2025-01-28</time>发表</span><span class="level-item"><time dateTime="2025-01-28T07:47:27.765Z" title="2025/1/28 15:47:27">2025-01-28</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/TypeScript/">TypeScript</a><span> / </span><a class="link-muted" href="/categories/Software-Construction/">Software Construction</a><span> / </span><a class="link-muted" href="/categories/Software-Construction/MIT6-031/">MIT6.031</a></span><span class="level-item">22 分钟读完 (大约3295个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/01/28/MIT6.031/Readings/02_Basic_TypeScript/">Reading 2-Basic TypeScript</a></p><div class="content"><h2 id="Objectives"><a href="#Objectives" class="headerlink" title="Objectives"></a>Objectives</h2><ul>
<li>Learn basic JavaScript and TypeScript syntax and semantics</li>
<li>Transition from writing Python to writing TypeScript</li>
</ul>
<h4 id="Software-in-6-031"><a href="#Software-in-6-031" class="headerlink" title="Software in 6.031"></a>Software in 6.031</h4><table>
<thead>
<tr>
<th align="left">Safe from bugs</th>
<th align="left">Easy to understand</th>
<th align="left">Ready for change</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Correct today and correct in the unknown future.</td>
<td align="left">Communicating clearly with future programmers, including future you.</td>
<td align="left">Designed to accommodate change without rewriting.</td>
</tr>
</tbody></table>
<h2 id="Arrays-Maps-and-Sets"><a href="#Arrays-Maps-and-Sets" class="headerlink" title="Arrays, Maps, and Sets"></a>Arrays, Maps, and Sets</h2><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><p><strong>A <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">TypeScript <code>Array</code></a> is similar to a <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#sequence-types-list-tuple-range">Python list</a>.</strong> An <code>Array</code> contains an ordered collection of zero or more objects, where the same object might appear multiple times. We can add and remove items to and from the <code>Array</code>, which will grow and shrink to accommodate its contents.</p>
<p>Example <code>Array</code> operations:</p>
<table>
<thead>
<tr>
<th align="left">TypeScript</th>
<th align="left">description</th>
<th align="left">Python</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>lst.length</code></td>
<td align="left">count the number of elements</td>
<td align="left"><code>len(lst)</code></td>
</tr>
<tr>
<td align="left"><code>lst.push(e)</code></td>
<td align="left">append an element to the end</td>
<td align="left"><code>lst.append(e)</code></td>
</tr>
<tr>
<td align="left"><code>if ( lst.length === 0 ) ...</code></td>
<td align="left">test if the list is empty</td>
<td align="left"><code>if not lst: ...</code></td>
</tr>
<tr>
<td align="left"><code>lst.includes(e)</code></td>
<td align="left">test if an element is in the list</td>
<td align="left"><code>e in lst</code></td>
</tr>
<tr>
<td align="left"><code>lst.splice(i, 1)</code></td>
<td align="left">remove the element at index i</td>
<td align="left"><code>del lst[i]</code></td>
</tr>
</tbody></table>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p><strong>A <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><code>Map</code></a> is similar to a <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#mapping-types-dict">Python dictionary</a>.</strong> In Python, the <strong>keys</strong> of a map must be <a target="_blank" rel="noopener" href="https://docs.python.org/3/glossary.html#term-hashable">hashable</a>. TypeScript has an even stricter requirement that we’ll discuss when we confront how equality works between objects; for now, it’s safest to use only strings and numbers as keys, rather than arbitrary objects.</p>
<p>Example <code>Map</code> operations:</p>
<table>
<thead>
<tr>
<th align="left">TypeScript</th>
<th align="left">description</th>
<th align="left">Python</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>map.set(key, val)</code></td>
<td align="left">add the mapping <em>key → val</em></td>
<td align="left"><code>map[key] = val</code></td>
</tr>
<tr>
<td align="left"><code>map.get(key)</code></td>
<td align="left">get the value for a key</td>
<td align="left"><code>map[key]</code></td>
</tr>
<tr>
<td align="left"><code>map.has(key)</code></td>
<td align="left">test whether the map has a key</td>
<td align="left"><code>key in map</code></td>
</tr>
<tr>
<td align="left"><code>map.delete(key)</code></td>
<td align="left">delete a mapping</td>
<td align="left"><code>del map[key]</code></td>
</tr>
<tr>
<td align="left"><code>map.size</code></td>
<td align="left">count the number of mappings</td>
<td align="left"><code>len(map)</code></td>
</tr>
</tbody></table>
<h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><p><strong>A <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set"><code>Set</code></a> is an unordered collection of zero or more unique objects.</strong> Like a mathematical <em>set</em> or a <a target="_blank" rel="noopener" href="https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset">Python set</a> – and unlike an <code>Array</code> – an object cannot appear in a set multiple times. Either it’s in or it’s out. Like the keys of a map, the objects in a Python set must be <a target="_blank" rel="noopener" href="https://docs.python.org/3/glossary.html#term-hashable">hashable</a>. Similarly, the TypeScript <code>Set</code> should be used with a type that is safe for use as the key of a <code>Map</code>, which (for now) means strings and numbers.</p>
<p>Example <code>Set</code> operations:</p>
<table>
<thead>
<tr>
<th align="left">TypeScript</th>
<th align="left">description</th>
<th align="left">Python</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>s.has(e)</code></td>
<td align="left">test if the set contains an element</td>
<td align="left"><code>e in s</code></td>
</tr>
<tr>
<td align="left"><code>s.add(e)</code></td>
<td align="left">add an element</td>
<td align="left"><code>s.add(e)</code></td>
</tr>
<tr>
<td align="left"><code>s.delete(e)</code></td>
<td align="left">remove an element</td>
<td align="left"><code>s.remove(e)</code></td>
</tr>
<tr>
<td align="left"><code>s.size</code></td>
<td align="left">count the number of elements</td>
<td align="left"><code>len(s)</code></td>
</tr>
</tbody></table>
<h3 id="Literals"><a href="#Literals" class="headerlink" title="Literals"></a>Literals</h3><p>Python provides convenient syntax for creating lists:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">letters = [ <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span> ]</span><br></pre></td></tr></table></figure>

<p>And maps:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fruits = &#123; <span class="string">&quot;apple&quot;</span>: <span class="number">5</span>, <span class="string">&quot;banana&quot;</span>: <span class="number">7</span> &#125;</span><br></pre></td></tr></table></figure>

<p>TypeScript has the same syntax for array literals:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">letters</span>:<span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [ <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span> ];</span><br></pre></td></tr></table></figure>

<p>but the syntax for creating a <code>Map</code> literal is a bit more involved. The best approach is an array of key-value pairs, like this:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">fruits</span>:<span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>([</span><br><span class="line">  [<span class="string">&quot;apple&quot;</span>, <span class="number">5</span>],</span><br><span class="line">  [<span class="string">&quot;banana&quot;</span>, <span class="number">7</span>],</span><br><span class="line">]);</span><br></pre></td></tr></table></figure>

<h3 id="Generics-declaring-Array-Set-and-Map-variables"><a href="#Generics-declaring-Array-Set-and-Map-variables" class="headerlink" title="Generics: declaring Array, Set, and Map variables"></a>Generics: declaring Array, Set, and Map variables</h3><p>Unlike Python collection types, with TypeScript collections we can restrict the type of objects contained in the collection. When we add an item, the compiler can perform <em>static checking</em> to ensure we only add items of the appropriate type. Then, when we pull out an item, we can be confident that its type will be what we expect.</p>
<p>Here’s the syntax for declaring some variables to hold collections:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">cities</span>:<span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;;      <span class="comment">// an Array of strings</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">numbers</span>:<span class="title class_">Set</span>&lt;<span class="built_in">number</span>&gt;;       <span class="comment">// a Set of numbers</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">turtles</span>:<span class="title class_">Map</span>&lt;<span class="built_in">string</span>,<span class="title class_">Turtle</span>&gt;; <span class="comment">// a Map with string keys and Turtle values</span></span><br></pre></td></tr></table></figure>

<p>TypeScript offers an alternative syntax for declaring an <code>Array</code> type, putting square brackets after the element type:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">cities</span>:<span class="built_in">string</span>[];    <span class="comment">// also an Array of strings</span></span><br></pre></td></tr></table></figure>

<p>We will generally use the <code>Array&lt;T&gt;</code> form, to make the meaning of the code clearer, but the <code>T[]</code> form is fine too. Note that <code>Array&lt;T&gt;</code> and <code>T[]</code> mean exactly the same thing in TypeScript (unlike other languages you may have encountered).</p>
<h3 id="Iteration"><a href="#Iteration" class="headerlink" title="Iteration"></a>Iteration</h3><p>A very common task is iterating through our cities&#x2F;numbers&#x2F;turtles&#x2F;etc.</p>
<p>In Python:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> city <span class="keyword">in</span> cities:</span><br><span class="line">    <span class="built_in">print</span>(city)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> numbers:</span><br><span class="line">    <span class="built_in">print</span>(num)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> turtles:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;%s: %s&quot;</span> % (key, turtles[key]))</span><br></pre></td></tr></table></figure>

<p>TypeScript provides a similar syntax for iterating over the items in arrays and sets, but using <strong>of</strong> rather than <strong>in</strong>:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> city <span class="keyword">of</span> cities) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(city);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> num <span class="keyword">of</span> numbers) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TypeScript also allows <code>let city of cities</code>, but <code>const</code> is preferable because it prevents you from inadvertently reassigning <code>city</code> in the body of the loop. TypeScript doesn’t allow declaring the type of the variable (e.g. with <code>const city:string of cities</code>); the type of <code>city</code> is inferred automatically from the element type of <code>cities</code>.</p>
<p><strong>Warning</strong>: avoid using <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in"><code>for...in</code></a> in TypeScript. It’s unfortunately legal syntax, but it does a very different thing than you expect. With an array <code>[&#39;a&#39;, &#39;b&#39;]</code>, for example, <code>for...in</code> will not loop over the elements of the array (<code>a</code>, <code>b</code>), but instead the <em>indices</em> of the array (0, 1). With a set or map, <code>for...in</code> quietly does nothing at all, leading you to think that the set or map is empty when it’s not. <strong>Avoid <code>for...in</code>, and use <code>for...of</code> instead.</strong></p>
<p>We can also iterate over the keys or values of a <code>Map</code> as we did in Python:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">of</span> turtles.<span class="title function_">keys</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + turtles.<span class="title function_">get</span>(key));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> value <span class="keyword">of</span> turtles.<span class="title function_">values</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// prints each Turtle</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> [key, value] <span class="keyword">of</span> turtles.<span class="title function_">entries</span>()) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key + <span class="string">&quot;: &quot;</span> + value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Under the hood this kind of <code>for</code> loop uses an <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols"><code>Iterator</code></a>, a design pattern we’ll see later in the class.</p>
<p><strong>Warning</strong>: be careful not to mutate a collection while you’re iterating over it. Adding, removing, or replacing elements disrupts the iteration and can even cause your program to crash. We’ll discuss the reason in more detail in a future class. Note that this warning applies to Python as well. The Python code below does not do what you might expect:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">numbers = [<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>]</span><br><span class="line"><span class="keyword">for</span> num <span class="keyword">in</span> numbers:</span><br><span class="line">    numbers.remove(num) <span class="comment"># danger!!! mutates the list we&#x27;re iterating over</span></span><br><span class="line"><span class="built_in">print</span>(numbers) <span class="comment"># list should be empty here -- is it?</span></span><br></pre></td></tr></table></figure>

<h4 id="Iterating-with-indices"><a href="#Iterating-with-indices" class="headerlink" title="Iterating with indices"></a>Iterating with indices</h4><p>If you want to, TypeScript provides different <code>for</code> loops that we can use to iterate through an array using its indices:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> ii = <span class="number">0</span>; ii &lt; cities.<span class="property">length</span>; ii++) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(cities[ii]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Unless we actually need the index value <code>ii</code>, this code is verbose and has more places for bugs to hide (starting at 1 instead of 0, using <code>&lt;=</code> instead of <code>&lt;</code>, using the wrong variable name for one of the occurrences of <code>ii</code>, …) Avoid it if you can.</p>
<h3 id="Missing-values-in-maps-and-arrays"><a href="#Missing-values-in-maps-and-arrays" class="headerlink" title="Missing values in maps and arrays"></a>Missing values in maps and arrays</h3><p>If you try to use <code>get()</code> to get a key that isn’t defined, then it returns the special value <code>undefined</code>:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">prices</span>: <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">prices.<span class="title function_">set</span>(<span class="string">&quot;apple&quot;</span>, <span class="number">5</span>);</span><br><span class="line">prices.<span class="title function_">get</span>(<span class="string">&quot;apple&quot;</span>)   <span class="comment">// returns 5</span></span><br><span class="line">prices.<span class="title function_">get</span>(<span class="string">&quot;banana&quot;</span>)  <span class="comment">// returns undefined</span></span><br></pre></td></tr></table></figure>

<p>Similarly, if you index into an array with an illegal index, the result is <code>undefined</code>:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">fruits</span>: <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&quot;apple&quot;</span>, <span class="string">&quot;banana&quot;</span>];</span><br><span class="line">fruits[<span class="number">0</span>]   <span class="comment">// returns &quot;apple&quot;</span></span><br><span class="line">fruits[<span class="number">1</span>]   <span class="comment">// returns &quot;banana&quot;</span></span><br><span class="line">fruits[<span class="number">2</span>]   <span class="comment">// returns undefined</span></span><br><span class="line">fruits[-<span class="number">1</span>]  <span class="comment">// returns undefined</span></span><br></pre></td></tr></table></figure>

<p>Surprisingly, JavaScript arrays are actually <em>sparse</em>: you can place a new element at an arbitrary index, not just in a contiguous sequence numbered from 0. Any unassigned indexes return <code>undefined</code>. For example:</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">arr</span>:<span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [];</span><br><span class="line">arr[<span class="number">2</span>] = <span class="string">&quot;x&quot;</span>;</span><br><span class="line">arr[<span class="number">0</span>]    <span class="comment">// returns undefined</span></span><br><span class="line">arr[<span class="number">1</span>]    <span class="comment">// returns undefined</span></span><br><span class="line">arr[<span class="number">2</span>]    <span class="comment">// returns &quot;x&quot;</span></span><br><span class="line">arr[<span class="number">3</span>]    <span class="comment">// returns undefined</span></span><br></pre></td></tr></table></figure>

<p>Array sparsity is used very rarely by TypeScript&#x2F;JavaScript programmers. Most of the time, an array should be used like a list in other languages, with contiguous indices numbered from 0.</p>
<h2 id="Variable-declarations"><a href="#Variable-declarations" class="headerlink" title="Variable declarations"></a>Variable declarations</h2><h3 id="Inferring-the-type-from-the-initializer"><a href="#Inferring-the-type-from-the-initializer" class="headerlink" title="Inferring the type from the initializer"></a>Inferring the type from the initializer</h3><p>When we declare a variable with an initializer, we can often omit the type declaration, and TypeScript will automatically infer it from the type of the initializing expression. So instead of:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">x</span>:<span class="built_in">number</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">name</span>:<span class="built_in">string</span> = <span class="string">&#x27;Frodo&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>we can simply write:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="number">5</span>; <span class="comment">// infers that x:number</span></span><br><span class="line"><span class="keyword">let</span> name = <span class="string">&#x27;Frodo&#x27;</span>; <span class="comment">// infers that name:string</span></span><br></pre></td></tr></table></figure>

<p>For <code>Array</code>, <code>Set</code>, and <code>Map</code> types, we can write the full type either in the declaration or in the initializer, and TypeScript will infer the other one:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// full type in the declaration; initializer type inferred</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">numbers</span>:<span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">map</span>:<span class="title class_">Map</span>&lt;<span class="built_in">string</span>,<span class="built_in">number</span>&gt; = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// full type in the initializer; declaration type inferred</span></span><br><span class="line"><span class="keyword">let</span> numbers = <span class="keyword">new</span> <span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>,<span class="built_in">number</span>&gt;();</span><br></pre></td></tr></table></figure>

<p>But the declarations below are incomplete, and will lead to static type errors somewhere down the line:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> numbers = [];      <span class="comment">// NO: what is the element type of the array?</span></span><br><span class="line"><span class="keyword">let</span> ages = <span class="keyword">new</span> <span class="title class_">Set</span>();  <span class="comment">// NO: what is the element type of the set?</span></span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span> <span class="title class_">Map</span>();   <span class="comment">// NO: what are the types of the keys and values?</span></span><br></pre></td></tr></table></figure>

<h3 id="let-vs-var"><a href="#let-vs-var" class="headerlink" title="let vs. var"></a><code>let</code> vs. <code>var</code></h3><p>As we have seen, TypeScript has two ways to declare local variables: <code>let</code> for variables that may need to be reassigned, and <code>const</code> for unreassignable variables. In older JavaScript code, you may also see <code>var</code> used to declare a variable, like this:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">5</span>; <span class="comment">// NO: avoid var</span></span><br></pre></td></tr></table></figure>

<p>These old-style <code>var</code> declarations are <strong>not recommended</strong>, because their scope is the entire function (like Python variables), while a <code>let</code> variable’s scope is just its enclosing curly braces. You can read <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/variable-declarations.html">more about the difference between <code>let</code> and <code>var</code></a> in the TypeScript Handbook.</p>
<h2 id="Object-literals-and-object-types"><a href="#Object-literals-and-object-types" class="headerlink" title="Object literals and object types"></a>Object literals and object types</h2><p>TypeScript has a syntax for creating an object with initialized instance variables:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">x</span>: <span class="number">5</span>, <span class="attr">y</span>: -<span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>

<p>pointObjectxy52</p>
<p>(Python has a similar syntax that creates a dictionary, not an object.)</p>
<p>The static type of this expression is <code>&#123; x:number, y:number &#125;</code>, which can be used to declare a variable:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">point</span>: &#123; <span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span> &#125; = &#123; <span class="attr">x</span>: <span class="number">5</span>, <span class="attr">y</span>: <span class="number">2</span> &#125;;</span><br></pre></td></tr></table></figure>

<p>Now <code>point.x</code> and <code>point.y</code> can be used to access the <code>x</code> and <code>y</code> values stored in the object that <code>point</code> refers to.</p>
<p>An object type that is just a collection of named fields, without any methods or operations, is called a <strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Record_(computer_science)">record type</a></strong> (also called a <em>struct</em> in languages like C&#x2F;C++). We will see better ways to manage complex data when we talk about abstract data types in a future class. But simple record types like this are useful for bundling together related bits of data temporarily, particularly when a function wants to return multiple values, e.g.:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">integerDivision</span>(<span class="params"><span class="attr">a</span>:<span class="built_in">number</span>, <span class="attr">b</span>:<span class="built_in">number</span></span>): &#123; <span class="attr">quotient</span>:<span class="built_in">number</span>, <span class="attr">remainder</span>:<span class="built_in">number</span> &#125; &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; </span><br><span class="line">        <span class="attr">quotient</span>: ..., <span class="comment">// result of dividing a by b</span></span><br><span class="line">        <span class="attr">remainder</span>: ... <span class="comment">// remainder after dividing a by b</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>TypeScript has a number of shortcuts for object literals, including <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#object_destructuring">destructuring assignment</a>:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const &#123; quotient, remainder &#125; = integerDivision(23, 7);</span><br></pre></td></tr></table></figure>

<p>This code declares the local variables <code>quotient</code> and <code>remainder</code> and initializes them with the correspondingly-named fields of the object returned by <code>integerDivision()</code>.</p>
<h2 id="Enumerations"><a href="#Enumerations" class="headerlink" title="Enumerations"></a>Enumerations</h2><p>Sometimes a type has a small, finite set of immutable values, such as:</p>
<ul>
<li>months of the year: January, February, …, November, December</li>
<li>days of the week: Monday, Tuesday, …, Saturday, Sunday</li>
<li>compass points: north, south, east, west</li>
<li>available colors: black, gray, red, …</li>
</ul>
<p>When the set of values is small and finite, it makes sense to define all the values as named constants, which TypeScript calls an <strong>enumeration</strong> and expresses with the <code>enum</code> construct.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Month</span> &#123; </span><br><span class="line">    <span class="variable constant_">JANUARY</span>, <span class="variable constant_">FEBRUARY</span>, <span class="variable constant_">MARCH</span>, <span class="variable constant_">APRIL</span>, </span><br><span class="line">    <span class="variable constant_">MAY</span>, <span class="variable constant_">JUNE</span>, <span class="variable constant_">JULY</span>, <span class="variable constant_">AUGUST</span>, </span><br><span class="line">    <span class="variable constant_">SEPTEMBER</span>, <span class="variable constant_">OCTOBER</span>, <span class="variable constant_">NOVEMBER</span>, <span class="variable constant_">DECEMBER</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">PenColor</span> &#123; </span><br><span class="line">    <span class="variable constant_">BLACK</span>, <span class="variable constant_">GRAY</span>, <span class="variable constant_">RED</span>, <span class="variable constant_">PINK</span>, <span class="variable constant_">ORANGE</span>, </span><br><span class="line">    <span class="variable constant_">YELLOW</span>, <span class="variable constant_">GREEN</span>, <span class="variable constant_">CYAN</span>, <span class="variable constant_">BLUE</span>, <span class="variable constant_">MAGENTA</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>You can use an enumeration type name like <code>PenColor</code> in a variable or method declaration:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">drawingColor</span>: <span class="title class_">PenColor</span>;</span><br></pre></td></tr></table></figure>

<p>Refer to the values of the enumeration as if they were named constants:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drawingColor = <span class="title class_">PenColor</span>.<span class="property">RED</span>;</span><br></pre></td></tr></table></figure>

<p>Note that an enumeration is a distinct new type. Older languages, like Python 2 or JavaScript, tend to use numeric constants or string literals to represent a finite set of values like this. But an enumeration is more typesafe, because it can catch mistakes like type mismatches:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">month</span>:<span class="built_in">number</span> = <span class="variable constant_">TUESDAY</span>;  <span class="comment">//  no error if numeric constants are used</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">month</span>:<span class="title class_">Month</span> = <span class="title class_">DayOfWeek</span>.<span class="property">TUESDAY</span>; <span class="comment">// static error if enumerations are used </span></span><br></pre></td></tr></table></figure>

<p>or misspellings:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">color</span>:<span class="built_in">string</span> = <span class="string">&quot;REd&quot;</span>;        <span class="comment">// no error, misspelling isn&#x27;t caught</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">drawingColor</span>:<span class="title class_">PenColor</span> = <span class="title class_">PenColor</span>.<span class="property">REd</span>; <span class="comment">// static error when enumeration value is misspelled</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/enum.html">Python 3 has enumerations</a>, similar to TypeScript’s, though not statically type-checked.</p>
<h2 id="API-documentation"><a href="#API-documentation" class="headerlink" title="API documentation"></a>API documentation</h2><p>Previous sections in this reading have a number of links to documentation for the JavaScript and TypeScript API.</p>
<p>API stands for <em>application programming interface</em>. If you want to program an app that talks to Facebook, Facebook publishes an API (more than one, in fact, for different languages and frameworks) you can program against.</p>
<p>TypeScript is a superset of JavaScript, so it relies on the JavaScript API for much of its functionality. JavaScript, in turn, runs in two different contexts: inside the web browser, and outside it (in Node.js). Each context has different APIs with different capabilities.</p>
<p>So three sources of API documentation are widely used for TypeScript&#x2F;JavaScript programming:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference">MDN JavaScript reference</a>, for general features of JavaScript, and for web-browser-specific APIs.</li>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/dist/latest-v14.x/docs/api/">Node.js reference</a>, for outside-the-browser APIs specific to Node.js.</li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/intro.html">The TypeScript Handbook</a>, for features specific to TypeScript.</li>
</ul>
<p>Here are some examples from MDN of APIs that are available in every TypeScript&#x2F;JavaScript context:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String"><strong><code>String</code></strong></a> is the type that TypeScript calls <code>string</code>. We can create <code>String</code> objects by using <code>&quot;double quotes&quot;</code> or <code>&#39;single quotes&#39;</code>.</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array"><strong><code>Array</code></strong></a> is like a Python list.</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"><strong><code>Map</code></strong></a> is like a Python dictionary.</li>
</ul>
<p>And here are some APIs from Node.js, available only for a program running in Node:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/dist/latest-v14.x/docs/api/fs.html#fs_fs_readfilesync_path_options"><strong><code>fs.readFileSync()</code></strong></a> reads a file from disk.</li>
<li><a target="_blank" rel="noopener" href="https://nodejs.org/dist/latest-v14.x/docs/api/os.html#os_os_homedir"><strong><code>os.homedir()</code></strong></a> gets the pathname of the user’s home directory.</li>
</ul>
<p>And here are some types we’ve discussed from TypeScript:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#arrays"><strong><code>arrays</code></strong></a></li>
<li><a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#enums"><strong><code>enumerations</code></strong></a></li>
</ul>
<h2 id="Programming-toolbox"><a href="#Programming-toolbox" class="headerlink" title="Programming toolbox"></a>Programming toolbox</h2><p>In your Python programming, you may have written your code using a programming editor, and then run it using the <code>python</code> command. (Or you may have used a development environment like Spyder, or a computational notebook like Jupyter.)</p>
<p>In the TypeScript&#x2F;JavaScript world, the set of tools you’ll need is more elaborate. This section briefly introduces you to each tool that we’ll use in 6.031 problem sets. The <a target="_blank" rel="noopener" href="https://web.mit.edu/6.031/www/sp22/getting-started/">Getting Started</a> page has instructions for installing the correct versions of all these tools.</p>
<p><strong><a target="_blank" rel="noopener" href="https://code.visualstudio.com/">Visual Studio Code</a></strong>. This is the programming editor we’ll be using. It has good support for programming in a wide variety of languages, not just TypeScript&#x2F;JavaScript.</p>
<p><strong>TypeScript compiler</strong>. The compiler statically-checks your TypeScript code and converts it into JavaScript code (we saw an example of this in the <a target="_blank" rel="noopener" href="https://web.mit.edu/6.031/www/sp22/classes/01-static-checking/#static_types_at_compile_time_dynamic_types_at_runtime">Static Checking reading</a>). Visual Studio Code has a TypeScript compiler built into it, which displays error messages as you’re typing the code. When it’s time to run the code, we will use <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/compiler-options.html"><code>tsc</code></a> (short for “TypeScript compiler”) to convert the TypeScript files into JavaScript files on disk. We won’t run <code>tsc</code> directly; instead we will run it through <code>npm</code>, discussed below.</p>
<p><strong><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Node.js">Node.js</a></strong>. Node is a JavaScript interpreter. The <code>node</code> command runs a file of JavaScript code, so it plays the analogous function as the <code>python</code> command in the Python world. JavaScript can also be run by a web browser. We will mostly be using <code>node</code> to run code in this class, but occasionally we will run some code in the web browser too.</p>
<p><strong><a target="_blank" rel="noopener" href="https://docs.npmjs.com/about-npm">npm</a></strong>. NPM is short for “Node Package Manager,” which actually has two functions. First, it manages the library of external packages that you’re using for your program. Before you use almost any TypeScript&#x2F;JavaScript project, your first step is likely to be <code>npm install</code> to install all the libraries it depends on. You will get used to running this command on all problem sets and in-class exercises. The other function of <code>npm</code> is as a general-purpose runner of other programming tools. For example, we will use <code>npm test</code> to compile code with the TypeScript compiler and run a test suite on it.</p>
<ul>
<li><code>npm</code> gets its configuration from a file called <code>package.json</code> which you will find in all our problem sets and in-class exercises. You can inspect it if you’re curious, but don’t modify this file in your 6.031 work.</li>
<li>When <code>npm install</code> installs libraries, it puts them into a subfolder called <code>node_modules</code>, so that every project has its own copy of its libraries, rather than installing them globally across your machine. If you are getting strange errors from a project you’ve just downloaded, it might be because you haven’t yet run <code>npm install</code> to create your <code>node_modules</code> folder.</li>
</ul>
<h3 id="Experimenting-with-TypeScript-code"><a href="#Experimenting-with-TypeScript-code" class="headerlink" title="Experimenting with TypeScript code"></a>Experimenting with TypeScript code</h3><p>In the Python world, you can use the <code>python</code> command (with no file argument) to get a Python interpreter prompt, where you can experiment with writing short bits of Python code.</p>
<p>This is a bit more complicated in the TypeScript&#x2F;JavaScript world. Although running <code>node</code> with no arguments does give you an interpreter prompt, it is a <em>JavaScript</em> prompt, not a TypeScript prompt. The <code>node</code> command alone doesn’t understand the extra features of TypeScript, like static checking.</p>
<p>Here are two ways to get a TypeScript prompt:</p>
<ul>
<li>Run <code>npx ts-node</code> in a project, like a 6.031 problem set or inclass exercise. (If you get a Not Found error, then you may need to <code>npm install ts-node</code> to make sure it’s installed in the project.) This will give you a prompt where you can type TypeScript code (not just JavaScript), and you will also be able to import any of the external libraries used by the project.</li>
<li>Use the <a href="https://www.typescriptlang.org/play?target=7">TypeScript Playground</a> in your web browser. This gives you an editor for writing and running short snippets of TypeScript code, but note that your code is running in a web browser environment, so it doesn’t have access to any of the libraries that Node provides.</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2025-01-25T09:00:00.000Z" title="2025/1/25 17:00:00">2025-01-25</time>发表</span><span class="level-item"><time dateTime="2025-01-25T08:56:56.721Z" title="2025/1/25 16:56:56">2025-01-25</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/TypeScript/">TypeScript</a><span> / </span><a class="link-muted" href="/categories/Software-Construction/">Software Construction</a><span> / </span><a class="link-muted" href="/categories/Software-Construction/MIT6-031/">MIT6.031</a></span><span class="level-item">29 分钟读完 (大约4318个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2025/01/25/MIT6.031/Readings/01_Static_Checking/">Reading 1-Static Checking</a></p><div class="content"><h2 id="Objectives"><a href="#Objectives" class="headerlink" title="Objectives"></a>Objectives</h2><p>Today’s class has two topics: </p>
<ul>
<li>static typing</li>
<li>the big three properties of good software</li>
</ul>
<h2 id="Hailstone-sequence"><a href="#Hailstone-sequence" class="headerlink" title="Hailstone sequence"></a>Hailstone sequence</h2><p>As a running example, we’re going to explore the hailstone sequence, which is defined as follows. Starting with a number <em>n</em>, the next number in the sequence is <em>n&#x2F;2</em> if <em>n</em> is even, or <em>3n+1</em> if <em>n</em> is odd. The sequence ends when it reaches 1. Here are some examples:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">2, 1</span><br><span class="line">3, 10, 5, 16, 8, 4, 2, 1</span><br><span class="line">4, 2, 1</span><br><span class="line">2n, 2n-1 , … , 4, 2, 1</span><br><span class="line">5, 16, 8, 4, 2, 1</span><br><span class="line">7, 22, 11, 34, 17, 52, 26, 13, 40, …? (where does this stop?)</span><br></pre></td></tr></table></figure>

<p>Because of the odd-number rule, the sequence may bounce up and down before decreasing to 1. It’s conjectured that all hailstones eventually fall to the ground – i.e., the hailstone sequence reaches 1 for all starting <em>n</em> – but that’s still an <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Collatz_conjecture">open question</a>. Why is it called a hailstone sequence? Because hailstones form in clouds by bouncing up and down, until they eventually build enough weight to fall to earth.</p>
<h2 id="Computing-hailstones"><a href="#Computing-hailstones" class="headerlink" title="Computing hailstones"></a>Computing hailstones</h2><p>Here’s some code for computing and printing the hailstone sequence for some starting <em>n</em>. We’ll write JavaScript and Python versions of the code side by side for comparison:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python</span></span><br><span class="line">n = <span class="number">3</span></span><br><span class="line"><span class="keyword">while</span> n != <span class="number">1</span>:</span><br><span class="line">    <span class="built_in">print</span>(n)</span><br><span class="line">    <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">0</span>:</span><br><span class="line">        n = n / <span class="number">2</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        n = <span class="number">3</span> * n + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(n)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript (or TypeScript, this code works in both languages)</span></span><br><span class="line"><span class="keyword">let</span> n = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">while</span> (n !== <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        n = n / <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        n = <span class="number">3</span> * n + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(n);</span><br></pre></td></tr></table></figure>

<p>The basic semantics of expressions and statements in JavaScript are very similar to Python. The <code>while</code> and <code>if</code> keywords behave the same, for example.</p>
<p>A few points of syntax are worth noting here:</p>
<ul>
<li>JavaScript requires parentheses around the conditions of the <code>if</code> and <code>while</code>.</li>
<li>A JavaScript statement ends with a semicolon. This is technically optional, because JavaScript has rules for automatically inserting a semicolon at the end of a line. But these rules have obscure pitfalls that can lead to unexpected behavior and bugs, so always using semicolons is a good practice.</li>
<li>JavaScript uses curly braces around blocks, instead of indentation. But you should still always indent the block, even though JavaScript won’t pay any attention to your extra spaces. Programming is a form of communication, and you’re communicating not only to the compiler, but to human beings. Humans need that indentation. We’ll come back to this later.</li>
</ul>
<p>You may also notice that the JavaScript version uses <code>===</code> and <code>!==</code> where the Python uses <code>==</code> and <code>!=</code>. That’s because <code>==</code> and <code>!=</code> in JavaScript do a variety of automatic type conversions to try to make the values on the lefthand side and righthand side comparable to each other. For example, <code>0 == &quot;&quot;</code> is true in JavaScript, which is surprising and confusing. The triple-equals versions of these operators are much safer and more predictable: <code>0 === &quot;&quot;</code> is false. Good JavaScript programmers will only use <code>===</code> and <code>!==</code>. This is a potential pitfall when moving from Python.</p>
<h2 id="Types"><a href="#Types" class="headerlink" title="Types"></a>Types</h2><p>But we are not using JavaScript in this class, strictly speaking. We are using <em>TypeScript</em>, which extends JavaScript with the ability to declare types in the program. In this case, we can specify that the variable <code>n</code> has type <code>number</code>:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">n</span>: <span class="built_in">number</span> = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<p>A <strong>type</strong> is a set of values, along with operations that can be performed on those values.</p>
<p>TypeScript has several built-in types, including:</p>
<ul>
<li><code>number</code>, which represents both integers and floating-point numbers</li>
<li><code>boolean</code>, which represents true or false</li>
<li><code>string</code>, which represents a sequence of characters</li>
</ul>
<p><strong>Operations</strong> are functions that take inputs and produce outputs (and sometimes change the values themselves). The syntax for operations varies, but we still think of them as functions no matter how they’re written. Here are several different syntaxes for an operation in Python or TypeScript:</p>
<ul>
<li><em>As an operator.</em> For example, <code>a + b</code> invokes the operation <code>+ : number × number → number</code>.<br>(In this notation: <code>+</code> is the name of the operation, <code>number × number</code> before the arrow gives the types of the two inputs, and <code>number</code> after the arrow gives the type of the output.)</li>
<li><em>As a function.</em> For example, <code>Math.sin(theta)</code> calls the operation <code>sin: number → number</code>. Here, <code>Math</code> is not an object. It’s the class that contains the <code>sin</code> function.</li>
<li><em>As a method of an object.</em> For example, <code>str1.concat(str2)</code> calls the operation <code>concat: string × string → string</code>.</li>
<li><em>As a property of an object.</em> For example, <code>str.length</code> calls the operation <code>length: string → number</code>. Note the lack of parentheses after <code>str.length</code>.</li>
</ul>
<p>Contrast TypeScript’s <code>str.length</code> with Python’s <code>len(str)</code>. It’s the same operation in both languages – taking a string and returning its length – but it just uses different syntax.</p>
<p>Some operations are <strong>overloaded</strong> in the sense that the same operation name is used for functions that take different types of arguments. The operator <code>+</code> is overloaded in TypeScript. With numbers, 5 + 3 naturally produces 8. But when <code>+</code> is used on strings, it does string concatenation instead, so “5” + “3” produces “53”. Overloading is not limited to operators like <code>+</code>; methods and functions can also be overloaded. Most programming languages have some degree of overloading.</p>
<h2 id="Static-typing"><a href="#Static-typing" class="headerlink" title="Static typing"></a>Static typing</h2><p>TypeScript is a <strong>statically-typed language</strong>. Variables can be assigned a type at <strong>compile time</strong> (before the program runs), and the compiler can therefore deduce the types of expressions using those variables. If <code>a</code> and <code>b</code> are declared as <code>number</code>, then the compiler concludes that <code>a+b</code> is also <code>number</code>. The VS Code environment does this while you’re writing the code, in fact, so you find out about many errors while you’re still typing.</p>
<p>JavaScript and Python, by contrast, are <strong>dynamically-typed languages</strong>, because this kind of checking is deferred until <strong>runtime</strong> (while the program is running).</p>
<p>Static typing is a particular kind of <strong>static checking</strong>, which means checking for bugs at compile time. Bugs are the bane of programming. Many of the ideas in this course are aimed at eliminating bugs from your code, and static checking is the first idea that we’ve seen for this. Static typing prevents a large class of bugs from infecting your program: to be precise, bugs caused by applying an operation to the wrong types of arguments. If you write a broken line of code like:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;5&quot;</span> * <span class="string">&quot;6&quot;</span></span><br></pre></td></tr></table></figure>

<p>that tries to multiply two strings, then static typing will catch this error while you’re still programming, rather than waiting until the line is reached during execution.</p>
<h3 id="Static-types-at-compile-time-dynamic-types-at-runtime"><a href="#Static-types-at-compile-time-dynamic-types-at-runtime" class="headerlink" title="Static types at compile time, dynamic types at runtime"></a>Static types at compile time, dynamic types at runtime</h3><p>Static type declarations are used at compile time to perform static checking. Adding static types doesn’t change the fact that the behavior of our program at runtime is driven by actual values. In the hailstone program, if we declare <code>let n: number = 3;</code> to specify the static type of <code>n</code>, the initial value at runtime is still <code>3</code>, not any other <code>number</code>. We’ll need to keep this distinction in mind when our static type encompasses more than one possible runtime type: a variable of static type <code>Animal</code> (let’s imagine) might really be a <code>Dog</code> or a <code>Fish</code> or a <code>SpottedOwl</code> at runtime.</p>
<p>In fact, TypeScript (like many statically-typed languages) <em>throws away</em> the static type information after compilation. What does the TypeScript compiler generate? JavaScript! Here is a bit of code in well-typed TypeScript, and the generated JavaScript:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// TypeScript to compile</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params"><span class="attr">name</span>: <span class="built_in">string</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hi, &#x27;</span> + name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> <span class="attr">greeting</span>: <span class="built_in">string</span> = <span class="title function_">hello</span>(<span class="string">&#x27;types&#x27;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JavaScript generated</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hello</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hi, &#x27;</span> + name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> greeting = <span class="title function_">hello</span>(<span class="string">&#x27;types&#x27;</span>);   </span><br></pre></td></tr></table></figure>

<h3 id="Support-for-static-typing-in-dynamically-typed-languages"><a href="#Support-for-static-typing-in-dynamically-typed-languages" class="headerlink" title="Support for static typing in dynamically-typed languages"></a>Support for static typing in dynamically-typed languages</h3><p>Just like TypeScript adds static typing to the dynamically-typed JavaScript language, Python also has extensions that support static typing. Python 3.5 and later allow you to declare <a target="_blank" rel="noopener" href="https://www.python.org/dev/peps/pep-0484/">type hints</a> in the code, e.g.:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python function declared with type hints</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">hello</span>(<span class="params">name:<span class="built_in">str</span></span>)-&gt;<span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hi, &#x27;</span> + name</span><br></pre></td></tr></table></figure>

<p>The declared types can be used by a checker like <a target="_blank" rel="noopener" href="http://mypy-lang.org/">Mypy</a> to find type errors statically without having to run the code.</p>
<p>The addition of static types to dynamically-typed languages like Python and JavaScript reflects a widespread belief among software engineers that the use of static types is essential to building and maintaining a large software system. The rest of this reading, and in fact this entire course, will show reasons for this belief.</p>
<p>Adding static types to a dynamically-typed language enables a programming approach called <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Gradual_typing">gradual typing</a>, in which some parts of the code have static type declarations and other parts omit them. Gradual typing can provide a smoother path for a small experimental prototype to grow into a large, stable, maintainable system.</p>
<h2 id="Static-checking-dynamic-checking-no-checking"><a href="#Static-checking-dynamic-checking-no-checking" class="headerlink" title="Static checking, dynamic checking, no checking"></a>Static checking, dynamic checking, no checking</h2><p>It’s useful to think about three kinds of automatic checking that a language can provide:</p>
<ul>
<li><strong>Static checking</strong>: the bug is found automatically before the program even runs.</li>
<li><strong>Dynamic checking</strong>: the bug is found automatically when the code is executed.</li>
<li><strong>No checking</strong>: the language doesn’t help you find the error at all. You have to watch for it yourself, or end up with wrong answers.</li>
</ul>
<p>Needless to say, catching a bug statically is better than catching it dynamically, and catching it dynamically is better than not catching it at all.</p>
<p>Here are some rules of thumb for what errors you can expect to be caught at each of these times.</p>
<p><strong>Static checking</strong> can catch:</p>
<ul>
<li>syntax errors, like extra punctuation or spurious words. Even dynamically-typed languages like Python do this kind of static checking. If you have an indentation error in your Python program, you’ll find out before the program starts running.</li>
<li>misspelled names, like <code>Math.sine(2)</code>. (The correct spelling is <code>sin</code>.)</li>
<li>wrong number of arguments, like <code>Math.sin(30, 20)</code>.</li>
<li>wrong argument types, like <code>Math.sin(&quot;30&quot;)</code>.</li>
<li>wrong return types, like <code>return &quot;30&quot;;</code> from a function that’s declared to return a <code>number</code>.</li>
</ul>
<p><strong>Dynamic checking</strong> can catch, for example:</p>
<ul>
<li>specific illegal argument values. For example, the expression <code>x/y</code> is erroneous when <code>y</code> is zero, but well-defined for other values of <code>y</code>. So divide-by-zero is not a static error, because you can’t know until runtime whether <code>y</code> is actually zero or not. But divide-by-zero can be caught as a dynamic error; Python throws <code>ZeroDivisionError</code> when it happens.</li>
<li>illegal conversions, i.e., when the specific value can’t be converted to or represented in the target type. For example, in Python, <code>int(&quot;hello&quot;)</code> throws <code>ValueError</code>, because the string <code>&quot;hello&quot;</code> cannot be parsed as a decimal integer.</li>
<li>out-of-range indices, e.g., using a too-large index on a string or array. In Python, <code>&quot;hello&quot;[13]</code> throws <code>IndexError</code>.</li>
<li>calling a method on a bad object reference (<code>None</code> in Python, or <code>undefined</code> or <code>null</code> in TypeScript).</li>
</ul>
<p>Static checking can detect errors related to the <em>type</em> of a variable – the set of values it is allowed to have, which is known at compile time in statically-typed languages like TypeScript – but is generally unable to find errors related to a specific value from that type.</p>
<p>But you may have noticed that the dynamic-checking examples above mostly came from Python. What about dynamic checking in TypeScript? TypeScript does the static checking, but its runtime behavior is entirely provided by <em>JavaScript</em>, and JavaScript’s designers decided to do <strong>no checking</strong> for many of these cases. So, for example, when a string or array index is out of bounds, JavaScript returns the special value <code>undefined</code>, rather than throwing an error as Python would. When dividing by zero, JavaScript returns a special value representing infinity, rather than throwing an error. No checking makes bugs harder to find than they might otherwise be, because the special values can propagate through further computations until a failure finally occurs, much farther away from the original mistake in the code.</p>
<h3 id="Surprise-number-is-not-a-true-number"><a href="#Surprise-number-is-not-a-true-number" class="headerlink" title="Surprise: number is not a true number"></a>Surprise: <code>number</code> is not a true number</h3><p>Another trap in TypeScript – which is shared by many other programming languages – is that its numeric type has corner cases that do not behave like the integers and real numbers we’re used to. As a result, some errors that really should be dynamically checked are not checked at all. Here are some of the traps hiding in TypeScript:</p>
<ul>
<li><p><strong>Limited precision for integers</strong>. All numbers in TypeScript are floating-point numbers, which means that large-magnitude integers can only be represented approximately. Integers from -253 to 253 can be represented exactly, but beyond that range, the floating-point representation preserves only the most-significant binary digits of the number. What does that mean if you have, say, 260 and try to increment it? You get the same number back again: <code>2**60 + 1 === 2**60</code> in TypeScript. So this is an example of where what we might have hoped would be a dynamic error (because the computation we wrote can’t be represented correctly) produces the wrong answer instead.</p>
<p>These limits on representable integers are available as the built-in constants <code>Number.MAX_SAFE_INTEGER</code> and <code>Number.MIN_SAFE_INTEGER</code>.</p>
</li>
<li><p><strong>Special values</strong>. The <code>number</code> type has several special values that aren’t real numbers: <code>Number.NaN</code> (which stands for “Not a Number”), <code>Number.POSITIVE_INFINITY</code>, and <code>Number.NEGATIVE_INFINITY</code>. So when you apply certain operations to a <code>number</code> that you’d expect to produce dynamic errors, like dividing by zero or taking the square root of a negative number, you will get one of these special values instead. If you keep computing with it, you’ll end up with a bad final answer.</p>
</li>
<li><p><strong>Overflow and underflow</strong>. Very large and very small numbers can’t be represented either, beyond a certain point. <code>Number.MAX_VALUE</code> is roughly 10308, and <code>Number.MIN_VALUE</code> is roughly 10-324. What happens when you do a computation whose answer is too large or too small (too close to zero) to fit in that finite range? The computation quietly <em>overflows</em> (becoming <code>POSITIVE_INFINITY</code> or <code>NEGATIVE_INFINITY</code>) or <em>underflows</em> (becoming zero).</p>
</li>
</ul>
<h2 id="Arrays"><a href="#Arrays" class="headerlink" title="Arrays"></a>Arrays</h2><p>Let’s change our hailstone computation so that it stores the sequence in a data structure, instead of just printing it out.</p>
<p>For that, we can use an array type. Arrays are variable-length sequences of another type, similar to Python lists. Here’s how we can declare an array of numbers and make an empty array value:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">array</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [];</span><br></pre></td></tr></table></figure>

<p>And here are some of its operations, which are very similar to Python:</p>
<ul>
<li>indexing: <code>array[2]</code></li>
<li>assignment: <code>array[2] = 0</code></li>
<li>length: <code>array.length</code></li>
<li>add an element to the end: <code>array.push(5)</code></li>
<li>remove an element from the end: <code>array.pop()</code></li>
</ul>
<p>You can see all the operations of <code>Array</code> in the Mozilla Developer Network (MDN) documentation; find it with a web search like <a target="_blank" rel="noopener" href="https://www.google.com/search?q=mdn+array">“mdn array”</a>. Get to know the MDN docs, they’re your friend.</p>
<p>Here’s the hailstone code written with arrays:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">array</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [];</span><br><span class="line"><span class="keyword">let</span> <span class="attr">n</span>: <span class="built_in">number</span> = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">while</span> (n !== <span class="number">1</span>) &#123;</span><br><span class="line">    array.<span class="title function_">push</span>(n);</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">2</span> === <span class="number">0</span>) &#123;</span><br><span class="line">        n = n / <span class="number">2</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        n = <span class="number">3</span> * n + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">array.<span class="title function_">push</span>(n);</span><br></pre></td></tr></table></figure>

<h2 id="Iterating"><a href="#Iterating" class="headerlink" title="Iterating"></a>Iterating</h2><p>A <code>for</code> loop steps through the elements of an array, just as in Python, though the syntax looks a little different. For example:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// find the maximum point of a hailstone sequence stored in array</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">max</span>: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> x <span class="keyword">of</span> array) &#123;</span><br><span class="line">    max = <span class="title class_">Math</span>.<span class="title function_">max</span>(x, max);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Be careful! Where in Python you use <code>for ... in ...</code>, the equivalent in TypeScript is <code>for ... of ...</code>. TypeScript also has a <code>for...in</code> construct which iterates over the keys of a collection, instead of its values. In the case of an array, the keys are the indices of the array. Note the difference that one word makes:</p>
<table>
<thead>
<tr>
<th><code>for (let x in [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]) &#123;    console.log(x); &#125; // prints 0, 1, 2</code></th>
<th><code>for (let x of [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]) &#123;    console.log(x); &#125; // prints &quot;a&quot;, &quot;b&quot;, &quot;c&quot;</code></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>When you’re iterating over an array, you almost always want <code>for...of</code></strong>, so you will need to untrain your Python habits here.</p>
<p>The example above also used <code>Math.max()</code>, which is a handy function from the JavaScript library. The <code>Math</code> class is full of useful functions like this – web search <a target="_blank" rel="noopener" href="https://www.google.com/search?q=mdn+math">“mdn math”</a> to find its documentation in MDN.</p>
<h2 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h2><p>If we want to wrap this code into a reusable module, we can write a function:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Compute a hailstone sequence.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n  starting number for sequence.  Assumes n &gt; 0.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> hailstone sequence starting with n and ending with 1.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hailstoneSequence</span>(<span class="params"><span class="attr">n</span>: <span class="built_in">number</span></span>): <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">array</span>: <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; = [];</span><br><span class="line">    <span class="keyword">while</span> (n !== <span class="number">1</span>) &#123;</span><br><span class="line">        array.<span class="title function_">push</span>(n);</span><br><span class="line">        <span class="keyword">if</span> (n % <span class="number">2</span> === <span class="number">0</span>) &#123;</span><br><span class="line">            n = n / <span class="number">2</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            n = <span class="number">3</span> * n + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    array.<span class="title function_">push</span>(n);</span><br><span class="line">    <span class="keyword">return</span> array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Take note of the <code>/** ... */</code> comment before the function, because it’s very important. This comment is a specification of the function, describing the inputs and outputs of the operation. The specification should be concise, clear, and precise. The comment provides information that is not already clear from the function types. It doesn’t say, for example, that the return value is an array of numbers, because the <code>Array&lt;number&gt;</code> return type declaration just below already says that. But it does say that the sequence starts with <code>n</code> and ends with 1, which is not captured by the type declaration but is important for the caller to know.</p>
<p>We’ll have a lot more to say about how to write good specifications in a few classes, but you’ll have to start reading them and using them right away.</p>
<h2 id="Mutating-values-vs-reassigning-variables"><a href="#Mutating-values-vs-reassigning-variables" class="headerlink" title="Mutating values vs. reassigning variables"></a>Mutating values vs. reassigning variables</h2><p>Change is a necessary evil. But good programmers try to avoid things that change, because they may change unexpectedly. Immutability – intentionally forbidding certain things from changing at runtime – will be a major design principle in this course.</p>
<p>For example, an immutable type is a type whose values can never change once they have been created. The string type is immutable in both Python and TypeScript.</p>
<p>TypeScript also allows us to declare immutable references: variables that are assigned once and never reassigned. To make a reference unreassignable, declare it with the keyword <code>const</code> instead of <code>let</code>:</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">n</span>: <span class="built_in">number</span> = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>If the TypeScript compiler isn’t convinced that your <code>const</code> variable will only be assigned once at runtime, then it will produce a compiler error. So <code>const</code> gives you static checking for unreassignable references.</p>
<p>It’s good practice to use <code>const</code> for as many variables as possible. Like the type of the variable, these declarations are important documentation, useful to the reader of the code and statically checked by the compiler.</p>
<h2 id="Documenting-assumptions"><a href="#Documenting-assumptions" class="headerlink" title="Documenting assumptions"></a>Documenting assumptions</h2><p>Writing the type of a variable down documents an assumption about it: e.g., the variable <code>n</code> will always refer to a number. TypeScript actually checks this assumption at compile time, and guarantees that there’s no place in your program where you violated this assumption.</p>
<p>Declaring a variable <code>const</code> is also a form of documentation, a claim that the variable will never be reassigned after its initial assignment. TypeScript checks that too, statically.</p>
<p>We documented another assumption that TypeScript (unfortunately) doesn’t check automatically: that <code>n</code> must be positive.</p>
<p>Why do we need to write down our assumptions? Because programming is full of them, and if we don’t write them down, we won’t remember them, and other people who need to read or change our programs later won’t know them. They’ll have to guess.</p>
<p>Programs have to be written with two goals in mind:</p>
<ul>
<li>communicating with the computer. First persuading the compiler that your program is sensible – syntactically correct and type-correct. Then getting the logic right so that it gives the right results at runtime.</li>
<li>communicating with other people. Making the program easy to understand, so that when somebody has to fix it, improve it, or adapt it in the future, they can do so.</li>
</ul>
<h2 id="Hacking-vs-engineering"><a href="#Hacking-vs-engineering" class="headerlink" title="Hacking vs. engineering"></a>Hacking vs. engineering</h2><p>We’ve written some hacky code in this reading. Hacking is often marked by unbridled optimism:</p>
<ul>
<li>Bad: writing lots of code before testing any of it.</li>
<li>Bad: keeping all the details in your head, assuming you’ll remember them forever, instead of writing them down in your code.</li>
<li>Bad: assuming that bugs will be nonexistent or else easy to find and fix.</li>
</ul>
<p>But software engineering is not hacking. Engineers are pessimists:</p>
<ul>
<li>Good: write a little bit at a time, testing as you go. In a future class, we’ll talk about test-first programming.</li>
<li>Good: document the assumptions that your code depends on.</li>
<li>Good: defend your code against stupidity – especially your own! Static checking helps with that.</li>
</ul>
<h2 id="The-goal-of-6-031"><a href="#The-goal-of-6-031" class="headerlink" title="The goal of 6.031"></a>The goal of 6.031</h2><p>Our primary goal in this course is learning how to produce software that is:</p>
<ul>
<li><strong>Safe from bugs</strong>. Correctness (correct behavior right now) and defensiveness (correct behavior in the future) are required in any software we build.</li>
<li><strong>Easy to understand</strong>. The code has to communicate to future programmers who need to understand it and make changes in it (fixing bugs or adding new features). That future programmer might be you, months or years from now. You’ll be surprised how much you forget if you don’t write it down, and how much it helps your own future self to have a good design.</li>
<li><strong>Ready for change</strong>. Software always changes. Some designs make it easy to make changes; others require throwing away and rewriting a lot of code.</li>
</ul>
<p>There are other important properties of software (like performance, usability, security), and they may trade off against these three. But these are the Big Three that we care about in 6.031, and that software developers generally put foremost in the practice of building software. It’s worth considering every language feature, every programming practice, every design pattern that we study in this course, and understanding how they relate to the Big Three.</p>
<h3 id="Why-we-use-TypeScript-in-this-course"><a href="#Why-we-use-TypeScript-in-this-course" class="headerlink" title="Why we use TypeScript in this course"></a>Why we use TypeScript in this course</h3><p>Since you’ve had 6.009, we’re assuming that you’re comfortable with Python. So why aren’t we using Python in this course? Why do we use TypeScript&#x2F;JavaScript in 6.031?</p>
<p><strong>Safety</strong> is the first reason. TypeScript has static checking (primarily type checking, but other kinds of static checks too, like that your code returns values from methods declared to do so). We’re studying software engineering in this course, and safety from bugs is a key tenet of that approach. TypeScript dials safety up to a high level, which makes it a good language for learning about good software engineering practices. It’s certainly possible to write safe code in dynamic languages like Python or JavaScript, but it’s easier to understand what you need to do if you learn how in a safe, statically-checked language.</p>
<p><strong>Ubiquity</strong> is another reason. TypeScript compiles into pure JavaScript, which is widely used in research, education, and industry. JavaScript runs on many platforms, not just in the web browser where it originally became widespread, but now also in web servers and even in desktop applications for Windows&#x2F;Mac&#x2F;Linux.</p>
<p>Compared to Java, TypeScript has a richer type system, needs less boilerplate code to write a program, and is a better choice for creating modern user interfaces and web apps.</p>
<p>In any case, a good programmer must be <strong>multilingual</strong>. Programming languages are tools, and you have to use the right tool for the job. You will very likely have to pick up other programming languages (such as Java, C&#x2F;C++, or Scheme or Ruby or Haskell) for classes, internships, or UROPs before you even finish your MIT career, so we’re getting started now by learning a second one.</p>
<p>As a result of its ubiquity, JavaScript has a wide array of interesting and useful <strong>libraries</strong>, and excellent free <strong>tools</strong> for development (IDEs like VS Code, editors, compilers, test frameworks, profilers, code coverage, style checkers). JavaScript and Python are close competitors in the richness of their ecosystems, and TypeScript can take full advantage of JavaScript libraries.</p>
<p>There are some reasons to regret using JavaScript. It’s large, having accumulated many features in the decades since it was originally designed. It’s weighed down by the baggage of older languages like C&#x2F;C++ — the <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch">switch statement</a> is a good example of an antiquated and unsafe language construct inherited from C. And JavaScript itself started with some poor design decisions, including type conversion rules that make</p>
<p> <a target="_blank" rel="noopener" href="https://web.mit.edu/6.031/www/sp22/classes/01-static-checking/#triple-equals">0 &#x3D;&#x3D; “” return true</a> and <a target="_blank" rel="noopener" href="https://www.destroyallsoftware.com/talks/wat">“[] + [] “somehow produce the empty string</a> , as well as <a target="_blank" rel="noopener" href="https://web.mit.edu/6.031/www/sp22/classes/01-static-checking/#no-checking-in-JS">less dynamic checking</a> than other languages. TypeScript fixes some of these warts in JavaScript, but not all. There are many parts of JavaScript that are now deprecated and avoided by programmers, because they’re risky to use.</p>
<p>But on the whole, TypeScript is a reasonable choice of language right now to learn how to write code that is safe from bugs, easy to understand, and ready for change. And that’s our goal.</p>
<p>Don’t get us wrong: the real skills you’ll get from this course are not language-specific, but carry over to any language that you might program in. The most important lessons from this course will survive language fads: safety, clarity, abstraction, engineering instincts.</p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>The main idea we introduced today is <strong>static checking</strong>. Here’s how this idea relates to the goals of the course:</p>
<ul>
<li><strong>Safe from bugs.</strong> Static checking helps with safety by catching type errors and other bugs before runtime.</li>
<li><strong>Easy to understand.</strong> It helps with understanding, because types are explicitly stated in the code.</li>
<li><strong>Ready for change.</strong> Static checking makes it easier to change your code by identifying other places that need to change in tandem.</li>
</ul>
</div></article></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.jpg" alt="Rossignol"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Rossignol</p><p class="is-size-6 is-block">NaN</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Mars</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives/"><p class="title">11</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories/"><p class="title">9</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags/"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/0xRossignol" target="_blank" rel="me noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Github" href="https://github.com/0xRossignol"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="me noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Golang/"><span class="level-start"><span class="level-item">Golang</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Golang/basics/"><span class="level-start"><span class="level-item">basics</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Java/"><span class="level-start"><span class="level-item">Java</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/Java/basics/"><span class="level-start"><span class="level-item">basics</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/OS/"><span class="level-start"><span class="level-item">OS</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/Software-Construction/"><span class="level-start"><span class="level-item">Software Construction</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul><li><a class="level is-mobile" href="/categories/Software-Construction/MIT6-031/"><span class="level-start"><span class="level-item">MIT6.031</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/TypeScript/"><span class="level-start"><span class="level-item">TypeScript</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/test/"><span class="level-start"><span class="level-item">test</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-02-10T05:20:00.000Z">2025-02-10</time></p><p class="title"><a href="/2025/02/10/Thinking-in-Java/Thinking-in-Java-pt-2/">Thinking in Java pt.2</a></p><p class="categories"><a href="/categories/Java/">Java</a> / <a href="/categories/Java/basics/">basics</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-02-09T02:54:56.000Z">2025-02-09</time></p><p class="title"><a href="/2025/02/09/Thinking-in-Java/Thinking-in-Java-pt-1/">Thinking in Java pt.1</a></p><p class="categories"><a href="/categories/Java/">Java</a> / <a href="/categories/Java/basics/">basics</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-28T07:39:54.000Z">2025-01-28</time></p><p class="title"><a href="/2025/01/28/MIT6.031/Readings/02_Basic_TypeScript/">Reading 2-Basic TypeScript</a></p><p class="categories"><a href="/categories/TypeScript/">TypeScript</a> / <a href="/categories/Software-Construction/">Software Construction</a> / <a href="/categories/Software-Construction/MIT6-031/">MIT6.031</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-25T09:00:00.000Z">2025-01-25</time></p><p class="title"><a href="/2025/01/25/MIT6.031/Readings/01_Static_Checking/">Reading 1-Static Checking</a></p><p class="categories"><a href="/categories/TypeScript/">TypeScript</a> / <a href="/categories/Software-Construction/">Software Construction</a> / <a href="/categories/Software-Construction/MIT6-031/">MIT6.031</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2025-01-11T07:49:15.000Z">2025-01-11</time></p><p class="title"><a href="/2025/01/11/Write%20your%20own%20Operating%20System/Operating-System-pt-2/">Operating System pt.2</a></p><p class="categories"><a href="/categories/OS/">OS</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2025/02/"><span class="level-start"><span class="level-item">二月 2025</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2025/01/"><span class="level-start"><span class="level-item">一月 2025</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/archives/2024/12/"><span class="level-start"><span class="level-item">十二月 2024</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/English/"><span class="tag">English</span><span class="tag">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Golang/"><span class="tag">Golang</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Java/"><span class="tag">Java</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/OS/"><span class="tag">OS</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Software-Construction/"><span class="tag">Software Construction</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TypeScript/"><span class="tag">TypeScript</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/test/"><span class="tag">test</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%B8%AD%E6%96%87/"><span class="tag">中文</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B1%87%E7%BC%96/"><span class="tag">汇编</span><span class="tag">2</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="订阅"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="MyBlog" height="28"></a><p class="is-size-7"><span>&copy; 2025 Rossignol</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2019</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script src="/js/pjax.js"></script><!--!--><!--!--><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>